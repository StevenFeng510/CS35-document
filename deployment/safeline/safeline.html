<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title 0="D" 1="e" 2="v" 3="e" 4="l" 5="o" 6="p" 7="m" 8="e" 9="n" 10="t" 11=" " 12="D" 13="o" 14="c" 15="u" 16="m" 17="e" 18="n" 19="t" 20="a" 21="t" 22="i" 23="o" 24="n"></title><meta name="description" content="">
    <link rel="preload" href="/CS35-document/assets/style-Cm4hoC9H.css" as="style"><link rel="stylesheet" href="/CS35-document/assets/style-Cm4hoC9H.css">
    <link rel="modulepreload" href="/CS35-document/assets/app-B8T7LOny.js"><link rel="modulepreload" href="/CS35-document/assets/safeline.html-BUma1iYh.js">
    <link rel="prefetch" href="/CS35-document/assets/index.html-BCI9c5ia.js" as="script"><link rel="prefetch" href="/CS35-document/assets/testing.html-DdB5tXFN.js" as="script"><link rel="prefetch" href="/CS35-document/assets/azure.html-DPa4Zxv3.js" as="script"><link rel="prefetch" href="/CS35-document/assets/back-end.html-DWn1Vpef.js" as="script"><link rel="prefetch" href="/CS35-document/assets/database.html-BGB8arkt.js" as="script"><link rel="prefetch" href="/CS35-document/assets/front-end.html-Bq8jopVE.js" as="script"><link rel="prefetch" href="/CS35-document/assets/payments.html-BBJWhH79.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-setup.html-ZD90PpVP.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-webhooks.html-CSoPqcG0.js" as="script"><link rel="prefetch" href="/CS35-document/assets/404.html-BLfxSDDq.js" as="script"><link rel="prefetch" href="/CS35-document/assets/setupDevtools-7MC2TMWH-BPQNp8EH.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/CS35-document/"><img class="vp-site-logo" src="/CS35-document/favicon.png" alt="Open_WebUI with Stripe Integration"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Open_WebUI with Stripe Integration</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Development <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/frontend/front-end.html" aria-label="Frontend development"><!---->Frontend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/backend/back-end.html" aria-label="Backend development"><!---->Backend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/database/database.html" aria-label="Database"><!---->Database<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Payment Integration (Stripe) <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-setup/stripe-setup.html" aria-label="Stripe setup instructions"><!---->Stripe setup instructions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-webhooks/stripe-webhooks.html" aria-label="Stripe webhooks"><!---->Stripe webhooks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/payments/payments.html" aria-label="Payments"><!---->Payments<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/CS35-document/testing/testing.html" aria-label="Testing"><!---->Testing<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Deployment <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/deployment/azure/azure.html" aria-label="Azure"><!---->Azure<!----></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/CS35-document/deployment/safeline/safeline.html" aria-label="Safeline"><!---->Safeline<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h2 id="safeline-installation-and-configuration-steps" tabindex="-1"><a class="header-anchor" href="#safeline-installation-and-configuration-steps"><span>Safeline Installation and Configuration Steps</span></a></h2><h3 id="_1-safeline-introduction" tabindex="-1"><a class="header-anchor" href="#_1-safeline-introduction"><span>1. Safeline Introduction</span></a></h3><p>Safeline is an open-source, web security solution developed to provide enhanced security for web applications and services. It operates as a Web Application Firewall (WAF), helping to protect applications from common threats like SQL injection, cross-site scripting (XSS), and DDoS attacks.By analyzing incoming and outgoing traffic, Safeline can detect and block malicious activity in real-time, preventing potential vulnerabilities from being exploited.</p><img src="/CS35-document/assets/slwork-vFzddQhJ.png" style="zoom:20%;"><h3 id="_2-configure-application-gateway-for-app-service" tabindex="-1"><a class="header-anchor" href="#_2-configure-application-gateway-for-app-service"><span>2. <strong>Configure Application Gateway for App Service</strong></span></a></h3><p>Before setting up Safeline, it&#39;s necessary to first configure an <strong>Application Gateway</strong> for the Azure App Service. This is required because the App Service uses a virtual IP address, which Safeline cannot directly use for traffic forwarding. The Application Gateway provides a public IP address that serves as a stable endpoint for external access. Safeline can then route traffic through this public IP, allowing it to securely act as a reverse proxy for the App Service.</p><ul><li><p><strong>Navigate to the Azure Portal</strong> and select <strong>Create a resource</strong>.</p></li><li><p>Choose <strong>Networking</strong> &gt; <strong>Application Gateway</strong> and configure the gateway settings.</p><p><img src="/CS35-document/assets/appgateway-PDPWOT1l.png" alt=""></p></li><li><p>Under the <strong>Frontend IP configuration</strong>, assign a <strong>Public IP</strong> address for the gateway. This IP will be used as the endpoint that Safeline will route traffic through.</p><p>In the <strong>Backend pool</strong> settings, add your App Service as the backend target. Select <strong>Add a backend pool</strong> and specify your App Service using its FQDN or IP-based settings.</p></li><li><p>Once deployed, this Application Gateway will serve as a secure entry point for traffic heading to the App Service. Safeline will use the public IP address provided by the gateway to securely forward requests, ensuring that traffic is correctly routed to the App Service.</p></li></ul><h3 id="_3-install-safeline-on-a-virtual-machine" tabindex="-1"><a class="header-anchor" href="#_3-install-safeline-on-a-virtual-machine"><span>3. <strong>Install Safeline on a Virtual Machine</strong></span></a></h3><ul><li><p><strong>Provision a Virtual Machine</strong> on Azure or another cloud provider to host Safeline.</p><p><img src="/CS35-document/assets/vm-CzDYRD_q.png" alt=""></p></li><li><p><strong>SSH into the VM</strong> after setup, then download and install Safeline by following the [Safeline installation guide on their official website](<a href="https://github.com/chaitin/SafeLine" target="_blank" rel="noopener noreferrer">GitHub - chaitin/SafeLine: serve as a reverse proxy to protect your web services from attacks and exploits.</a>).</p></li><li><p>Once installed, configure the firewall and network settings according to Safeline’s instructions to ensure secure communication between your Application Gateway and Safeline.</p></li></ul><h3 id="_4-configure-safeline-for-traffic-forwarding" tabindex="-1"><a class="header-anchor" href="#_4-configure-safeline-for-traffic-forwarding"><span>4. <strong>Configure Safeline for Traffic Forwarding</strong></span></a></h3><ul><li><p>Set up Safeline to forward traffic from the Application Gateway to your backend App Service.</p></li><li><p>In the Safeline configuration, specify the IP addresses and forwarding rules to ensure traffic is correctly routed.</p></li><li><p>Apply any necessary security settings within Safeline for monitoring and traffic control.</p></li><li><p>Configure a firewall on the <strong>Application Gateway</strong> and set up access restrictions on the <strong>App Service</strong> to ensure that traffic can only flow in from the Safeline server.</p><p><img src="/CS35-document/assets/sl-B3VVfxyN.png" alt=""></p></li></ul><h3 id="_5-domain-configuration-and-tls-setup" tabindex="-1"><a class="header-anchor" href="#_5-domain-configuration-and-tls-setup"><span>5.Domain Configuration and TLS Setup</span></a></h3><ul><li><strong>Purchase and Set Up a Domain in GoDaddy</strong>: <ul><li>If you haven’t already, purchase a domain from GoDaddy or other websites. Once you&#39;ve purchased a domain, log into your GoDaddy account and navigate to the <strong>DNS Management</strong> page.</li><li>In DNS Management, configure an <strong>A record</strong> to point to the IP address of your Application Gateway. This links your domain to your application, enabling users to access it via the domain name.</li></ul></li><li>Install TLS Certificate Using ZeroSSL or other websites: <ul><li>Go to <a href="https://zerossl.com/" target="_blank" rel="noopener noreferrer">ZeroSSL</a>, generate a TLS certificate, and download it along with the CA bundle.</li><li>SSH into your Virtual Machine and install the certificate by placing the <code>.crt</code> and <code>.key</code> files into the appropriate directories or install these files in Safeline configuration.</li><li>Update the web server (e.g., Nginx, Apache) or Application Gateway to reference the new TLS certificate, and restart services as needed to apply the changes.</li></ul></li></ul><p>With these steps completed, Safeline should be ready to securely forward traffic from your configured domain to the App Service via the Application Gateway, protected by the TLS certificate from ZeroSSL.</p></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: StevenFeng1020@outlook.com">StevenFeng</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 1276502818@qq.com">hyq-manu</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/CS35-document/deployment/azure/azure.html" aria-label="Azure"><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span>Azure</span></div></a><!----></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/CS35-document/assets/app-B8T7LOny.js" defer></script>
  </body>
</html>
