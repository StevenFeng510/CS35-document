<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title 0="D" 1="e" 2="v" 3="e" 4="l" 5="o" 6="p" 7="m" 8="e" 9="n" 10="t" 11=" " 12="D" 13="o" 14="c" 15="u" 16="m" 17="e" 18="n" 19="t" 20="a" 21="t" 22="i" 23="o" 24="n"></title><meta name="description" content="">
    <link rel="preload" href="/CS35-document/assets/style-Cm4hoC9H.css" as="style"><link rel="stylesheet" href="/CS35-document/assets/style-Cm4hoC9H.css">
    <link rel="modulepreload" href="/CS35-document/assets/app-5nxLNYCg.js"><link rel="modulepreload" href="/CS35-document/assets/azure.html-BCMG9zZd.js">
    <link rel="prefetch" href="/CS35-document/assets/index.html-BPn1ab4i.js" as="script"><link rel="prefetch" href="/CS35-document/assets/testing.html-B06Ncyrf.js" as="script"><link rel="prefetch" href="/CS35-document/assets/safeline.html-BGNVIoiz.js" as="script"><link rel="prefetch" href="/CS35-document/assets/back-end.html-DSlpYtwm.js" as="script"><link rel="prefetch" href="/CS35-document/assets/database.html-CqTiWnAk.js" as="script"><link rel="prefetch" href="/CS35-document/assets/front-end.html-DI6597sl.js" as="script"><link rel="prefetch" href="/CS35-document/assets/payments.html-DPss-MLK.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-setup.html-x1Hj45XH.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-webhooks.html-C5p3f3o8.js" as="script"><link rel="prefetch" href="/CS35-document/assets/404.html-DtznL984.js" as="script"><link rel="prefetch" href="/CS35-document/assets/setupDevtools-7MC2TMWH-CS1nvkIR.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/CS35-document/"><img class="vp-site-logo" src="/CS35-document/favicon.png" alt="Open_WebUI with Stripe Integration"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Open_WebUI with Stripe Integration</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Development <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/frontend/front-end.html" aria-label="Frontend development"><!---->Frontend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/backend/back-end.html" aria-label="Backend development"><!---->Backend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/database/database.html" aria-label="Database"><!---->Database<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Payment Integration (Stripe) <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-setup/stripe-setup.html" aria-label="Stripe setup instructions"><!---->Stripe setup instructions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-webhooks/stripe-webhooks.html" aria-label="Stripe webhooks"><!---->Stripe webhooks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/payments/payments.html" aria-label="Payments"><!---->Payments<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/CS35-document/testing/testing.html" aria-label="Testing"><!---->Testing<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Deployment <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/CS35-document/deployment/azure/azure.html" aria-label="Azure"><!---->Azure<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/deployment/safeline/safeline.html" aria-label="Safeline"><!---->Safeline<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h2 id="steps-to-deploy-your-project-using-docker-and-azure" tabindex="-1"><a class="header-anchor" href="#steps-to-deploy-your-project-using-docker-and-azure"><span>Steps to Deploy Your Project Using Docker and Azure</span></a></h2><h3 id="_1-abstract" tabindex="-1"><a class="header-anchor" href="#_1-abstract"><span>1. Abstract</span></a></h3><p>This project will use Docker to package a local application into a containerized environment, which enables smooth deployment to Azure. The application image is built locally, uploaded to the Azure Container Registry, and then deployed using Azure App Service, where environment variables are configured to ensure full functionality, including Stripe payment processing.</p><h3 id="_2-build-the-local-docker-image" tabindex="-1"><a class="header-anchor" href="#_2-build-the-local-docker-image"><span>2. Build the Local Docker Image</span></a></h3><ul><li><strong>Navigate to the directory containing your <code>Dockerfile</code> and run</strong></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> build <span class="token parameter variable">-t</span> <span class="token variable"><span class="token variable">`</span>your-image-name<span class="token variable">`</span></span> <span class="token builtin class-name">.</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This command creates a Docker image that contains all necessary dependencies and configurations specified in the <code>Dockerfile</code>.</p><ul><li><strong>Run the Docker Container</strong></li></ul><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> run <span class="token parameter variable">-d</span> <span class="token parameter variable">-p</span> <span class="token variable"><span class="token variable">`</span>host-port<span class="token variable">`</span></span><span class="token builtin class-name">:</span> <span class="token variable"><span class="token variable">`</span>container-port<span class="token variable">`</span></span> <span class="token parameter variable">--name</span> <span class="token variable"><span class="token variable">`</span>your-container-name<span class="token variable">`</span></span> <span class="token variable"><span class="token variable">`</span>your-image-name<span class="token variable">`</span></span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><strong>Access the application</strong></li></ul><p>Open your browser and visit <code>http://localhost:&lt;host-port&gt;</code> to ensure the application is running successfully. The Stripe functionality may not be fully operational locally due to the absence of configured environment variables. It can be configured in the Azure environment instead in the next steps.</p><p>Our team also uploads the image to Docker Hub, which can be directly downloaded using the command:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> pull yiqinghu/capstone1016new:v1</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>This allows collaborators or other environments to deploy the application without rebuilding the image locally.</p><h3 id="_3-create-azure-container-registry" tabindex="-1"><a class="header-anchor" href="#_3-create-azure-container-registry"><span>3. Create Azure Container Registry</span></a></h3><p>Creating an Azure Container Registry (ACR) will allow you to store and manage Docker images for deployment in Azure services.</p><ul><li><p><strong>Log in to the Azure Portal.</strong></p></li><li><p><strong>Select Create Resource &gt; Containers &gt; Container Registry.</strong></p></li></ul><p><img src="/CS35-document/assets/acr-DxQBL1Bu.png" alt=""></p><ul><li><strong>Configure the Registry Details</strong></li></ul><p>Fill in the registry’s information:</p><ol><li><p><strong>Subscription</strong>: Choose the subscription where you want the registry to be billed.</p></li><li><p><strong>Resource Group</strong>: Either select an existing group or create a new one.</p></li><li><p><strong>Registry Name</strong>: Provide a unique name for your registry.</p></li><li><p><strong>Location</strong>: Select the closest or most suitable region for your use.</p></li></ol><ul><li><strong>Install Azure CLI</strong></li></ul><p>If you haven’t installed Azure CLI yet, you can follow the <a href="https://learn.microsoft.com/zh-cn/cli/azure/install-azure-cli" target="_blank" rel="noopener noreferrer">installation guide</a>. Login to Azure Container Registry: Open your command line interface and run:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line">az acr login <span class="token parameter variable">--name</span> <span class="token operator">&lt;</span>your-acr-name<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><h5 id="tag-and-push-docker-image" tabindex="-1"><a class="header-anchor" href="#tag-and-push-docker-image"><span><strong>Tag and Push Docker Image</strong></span></a></h5></li></ul><p>Tag your local Docker image and push it to your Azure Container Registry with the following commands:</p><div class="language-bash line-numbers-mode" data-highlighter="prismjs" data-ext="sh" data-title="sh"><pre><code><span class="line"><span class="token function">docker</span> tag <span class="token operator">&lt;</span>local-image-name<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span> <span class="token operator">&lt;</span>your-acr-name<span class="token operator">&gt;</span>.azurecr.io/<span class="token operator">&lt;</span>image-name<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span></span>
<span class="line"><span class="token function">docker</span> push <span class="token operator">&lt;</span>your-acr-name<span class="token operator">&gt;</span>.azurecr.io/<span class="token operator">&lt;</span>image-name<span class="token operator">&gt;</span>:<span class="token operator">&lt;</span>tag<span class="token operator">&gt;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>This pushes your local Docker image to the remote Azure Container Registry. Adjust the local and remote names accordingly; the push process might take some time. After this, your image will be accessible in your Azure Container Registry, ready for deployment in other Azure services such as App Service</p><h3 id="_4-deploy-using-azure-app-service" tabindex="-1"><a class="header-anchor" href="#_4-deploy-using-azure-app-service"><span>4. Deploy Using Azure App Service</span></a></h3><ul><li><p><strong>Log in to the Azure Portal.</strong></p></li><li><p><strong>Create an Azure App Service instance and select your container image that you have just uploaded.</strong></p></li></ul><p><img src="/CS35-document/assets/webapp-B8cL2zTh.png" alt=".."></p><ul><li><p><strong>Ensure that the corresponding port is set for public access.</strong></p></li><li><p><strong>Once deployment is complete, you can access your application via the URL provided by Azure.</strong></p></li></ul><h3 id="_5-environment-variables-settings" tabindex="-1"><a class="header-anchor" href="#_5-environment-variables-settings"><span>5. Environment Variables Settings</span></a></h3><ul><li><p>Some environment variables need to be set, such as <code>WEBHOOK_ENDPOINT_SECRET</code> and <code>STRIPE_API_KEY</code>. You can refer to the relevant Stripe <a class="route-link" href="/CS35-document/stripe/stripe-setup/stripe-setup.html">Documentation</a> for instructions on how to set these.</p></li><li><p>The <code>DATABASE_URL</code> should contain the information for the database you have deployed.</p></li><li><p>The <code>CHECKOUT_SUCCESS_URL</code> is the page to which users will be redirected after a successful payment, specifically the URL of your deployed application.</p></li><li><p>The <code>WEEKLY_PRICE</code>, <code>MONTHLY_PRICE</code>, and <code>ANNUALLY_PRICE</code> is the price ID automatically generated when creating products and prices in the Stripe Dashboard.</p></li></ul></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: StevenFeng1020@outlook.com">StevenFeng</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: 1276502818@qq.com">hyq-manu</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/CS35-document/deployment/safeline/safeline.html" aria-label="Safeline"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Safeline</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/CS35-document/assets/app-5nxLNYCg.js" defer></script>
  </body>
</html>
