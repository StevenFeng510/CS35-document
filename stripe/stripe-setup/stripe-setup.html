<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title 0="D" 1="e" 2="v" 3="e" 4="l" 5="o" 6="p" 7="m" 8="e" 9="n" 10="t" 11=" " 12="D" 13="o" 14="c" 15="u" 16="m" 17="e" 18="n" 19="t" 20="a" 21="t" 22="i" 23="o" 24="n"></title><meta name="description" content="">
    <link rel="preload" href="/CS35-document/assets/style-Cm4hoC9H.css" as="style"><link rel="stylesheet" href="/CS35-document/assets/style-Cm4hoC9H.css">
    <link rel="modulepreload" href="/CS35-document/assets/app-B8T7LOny.js"><link rel="modulepreload" href="/CS35-document/assets/stripe-setup.html-ZD90PpVP.js">
    <link rel="prefetch" href="/CS35-document/assets/index.html-BCI9c5ia.js" as="script"><link rel="prefetch" href="/CS35-document/assets/testing.html-DdB5tXFN.js" as="script"><link rel="prefetch" href="/CS35-document/assets/azure.html-DPa4Zxv3.js" as="script"><link rel="prefetch" href="/CS35-document/assets/safeline.html-BUma1iYh.js" as="script"><link rel="prefetch" href="/CS35-document/assets/back-end.html-DWn1Vpef.js" as="script"><link rel="prefetch" href="/CS35-document/assets/database.html-BGB8arkt.js" as="script"><link rel="prefetch" href="/CS35-document/assets/front-end.html-Bq8jopVE.js" as="script"><link rel="prefetch" href="/CS35-document/assets/payments.html-BBJWhH79.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-webhooks.html-CSoPqcG0.js" as="script"><link rel="prefetch" href="/CS35-document/assets/404.html-BLfxSDDq.js" as="script"><link rel="prefetch" href="/CS35-document/assets/setupDevtools-7MC2TMWH-BPQNp8EH.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/CS35-document/"><img class="vp-site-logo" src="/CS35-document/favicon.png" alt="Open_WebUI with Stripe Integration"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Open_WebUI with Stripe Integration</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Development <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/frontend/front-end.html" aria-label="Frontend development"><!---->Frontend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/backend/back-end.html" aria-label="Backend development"><!---->Backend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/database/database.html" aria-label="Database"><!---->Database<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Payment Integration (Stripe) <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/CS35-document/stripe/stripe-setup/stripe-setup.html" aria-label="Stripe setup instructions"><!---->Stripe setup instructions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-webhooks/stripe-webhooks.html" aria-label="Stripe webhooks"><!---->Stripe webhooks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/payments/payments.html" aria-label="Payments"><!---->Payments<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/CS35-document/testing/testing.html" aria-label="Testing"><!---->Testing<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Deployment <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/deployment/azure/azure.html" aria-label="Azure"><!---->Azure<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/deployment/safeline/safeline.html" aria-label="Safeline"><!---->Safeline<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h1 id="instructions-for-setting-up-stripe" tabindex="-1"><a class="header-anchor" href="#instructions-for-setting-up-stripe"><span>Instructions for setting up stripe</span></a></h1><p>Stripe is the payment system integrated in our project. Its official site can be accessed <a href="https://stripe.com/au" target="_blank" rel="noopener noreferrer">here</a>. Please follow these instructions after the deployment of the application on Azure. It is normal that the application does not run normally just yet. Once these instructions are successfully followed, the application will function properly.</p><p>An important note, please ensure the correctness of weekly, monthly and yearly price IDs, the Stripe API key and the webhook endpoint secret when added them to the environment variables in the Azure APP.</p><h2 id="_1-steps-to-setup-stripe" tabindex="-1"><a class="header-anchor" href="#_1-steps-to-setup-stripe"><span>1. Steps to setup Stripe</span></a></h2><ol><li>Go to Stripe&#39;s website to create an account. You should automatically receive test access. The developers dashboard can be found by clicking the <strong>Dashboard</strong> button in the top-right.</li><li>Click on <strong>Product catalog</strong>, as shown in the screenshot below. Click on <strong>Create product</strong> to add a product. This is where you add the products, i.e., the price for weekly, monthly and yearly subscriptions.</li></ol><br><img src="/CS35-document/assets/Product_catalog-C82roqLW.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="3"><li>Give the product a descriptive name. Click on <strong>More pricing options</strong>, as shown in the screenshot below.</li></ol><br><img src="/CS35-document/assets/Add_product_page-BDLyWunr.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><p>This leads you to the overlay shown below. Make sure <strong>Recurring</strong> and <strong>Flat rate</strong> are selected. These should be the default options, but just check them to be safe. Enter an amount, i.e. price. Click <strong>Next</strong> to save this product. You can refer to the screenshot below.</p><br><img src="/CS35-document/assets/Add_prices-Bx6DPJnb.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><p>Repeat this process for weekly, monthly and yearly prices, by clicking on <strong>+ Add another price</strong>. Finally click on <strong>Add product</strong> to save your operations.</p><br><img src="/CS35-document/assets/Add_more_products-BSI4RLhz.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="4"><li>You should now see a product in your product catalog, with the name that you specified. Click on it to see the product details.</li></ol><br><img src="/CS35-document/assets/Product-C1fzjBeG.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="5"><li>For each of the items, click on it to go to its detail page, and copy the price ID in the top-right corner. Refer to the screenshot below to find the price ID. These price IDs should be added to the respective environment variables through the Azure dashboard, i.e. weekly price ID under <strong>WEEKLY_PRICE</strong>, monthly price ID under <strong>MONTHLY_PRICE</strong> and yearly price ID under <strong>ANNUALLY_PRICE</strong>. Remember to click on <strong>Apply</strong> to save the environment variables.</li></ol><br><img src="/CS35-document/assets/Price_ID-BIEFuBKP.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><h2 id="_2-steps-to-connect-stripe-with-azure-application" tabindex="-1"><a class="header-anchor" href="#_2-steps-to-connect-stripe-with-azure-application"><span>2. Steps to connect Stripe with Azure application</span></a></h2><ol><li>With the created account, go to the developer dashboard where you will obtain an API key in the <strong>API key</strong> page. The API key will be hidden at first, so click on the button to reveal it. This is how Stripe authenticates the requests sent from the backend of our application to be legitimate. Note this down to be used as an environment variable in Azure. Go back to your application&#39;s dashboard in Azure and go to the <strong>Environment Variables</strong> page under <strong>Settings</strong>. Click on the <strong>STRIPE_API_KEY</strong> variable and paste in the API key that you&#39;ve just obtained from Stripe. Click on <strong>Apply</strong> to save it.</li></ol><br><img src="/CS35-document/assets/Stripe_dashboard-CVqIo1y9.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="2"><li><p>You would&#39;ve deployed the application on Azure by now, so you will have a public domain for the service. With the public domain, go to the <strong>&quot;Developers&quot;</strong> option in Stripe, where you will find a tab called <strong>Webhooks</strong>. Click on <strong>Add endpoint</strong>. Select <strong>Your account</strong> and <strong>Select all events</strong> (we don&#39;t need all events to function, but this is easier to describe and follow). Click on <strong>Continue</strong> and add the application&#39;s public domain along with the route for the webhook. The final url should look like this: <code>https://&lt;public domain&gt;/api/v1/stripe/stripe_webhook</code>. Click on <code>Add destination</code>. The webhook endpoint is now added to Stripe.</p></li><li><p>Once the webhook endpoint is added, you will see it listed in the dashboard under the <strong>Webhooks</strong> tab. Click on it, and you will see a line of text saying <strong>Signing secret</strong>. Click on <strong>Reveal</strong> to see a string starting with &quot;whsec&quot;. This will be the webhook secret to use. Go to the <strong>Environment Variables</strong> page and replace the value under <strong>WEBHOOK_ENDPOINT_SECRET</strong> with the webhook secret. Remember to click <strong>Apply</strong> to save the variable.</p></li></ol><br><img src="/CS35-document/assets/Webhook-CIiTvyb3.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="4"><li>You have now successfully set all of the environment variables. Click on <strong>Apply</strong> on the page to save all the changes, and click <strong>Confirm</strong> to restart the application. When Azure shows you a success message, you can close the page.</li></ol><br><img src="/CS35-document/assets/Confirm_variables-ChTo1X14.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="5"><li>Go to the Stripe dashboard and search for <code>customer portal</code>. Click on the search result to reach the page.</li></ol><br><img src="/CS35-document/assets/search_customer_portal-Bt-xQtL9.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="6"><li>Scroll down to find <code>Business information</code>. Paste the app&#39;s domain in the <code>Redirect link</code> parameter. Click <code>Save changes</code> in the top-right corner.</li></ol><br><img src="/CS35-document/assets/set_myplans_back-C93mZcIA.png" alt="Image" style="display:block;margin:auto;width:80%;height:auto;"><br><ol start="7"><li>Voilà! If you&#39;ve reached this far, the setup process is complete. You can start using the app using the Safeline domain!</li></ol></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: zihe2003@uni.sydney.edu.au">Bryan</span><!--[-->, <!--]--><!--]--><!--[--><span class="contributor" title="email: StevenFeng1020@outlook.com">StevenFeng</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/CS35-document/stripe/stripe-webhooks/stripe-webhooks.html" aria-label="Stripe webhooks"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Stripe webhooks</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/CS35-document/assets/app-B8T7LOny.js" defer></script>
  </body>
</html>
