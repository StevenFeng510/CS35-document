<!doctype html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.18" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme')
      const systemDarkMode =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (userMode === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (userMode === 'dark' || systemDarkMode) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title 0="D" 1="e" 2="v" 3="e" 4="l" 5="o" 6="p" 7="m" 8="e" 9="n" 10="t" 11=" " 12="D" 13="o" 14="c" 15="u" 16="m" 17="e" 18="n" 19="t" 20="a" 21="t" 22="i" 23="o" 24="n"></title><meta name="description" content="Description of this page">
    <link rel="preload" href="/CS35-document/assets/style-Cm4hoC9H.css" as="style"><link rel="stylesheet" href="/CS35-document/assets/style-Cm4hoC9H.css">
    <link rel="modulepreload" href="/CS35-document/assets/app-B8T7LOny.js"><link rel="modulepreload" href="/CS35-document/assets/front-end.html-Bq8jopVE.js">
    <link rel="prefetch" href="/CS35-document/assets/index.html-BCI9c5ia.js" as="script"><link rel="prefetch" href="/CS35-document/assets/testing.html-DdB5tXFN.js" as="script"><link rel="prefetch" href="/CS35-document/assets/azure.html-DPa4Zxv3.js" as="script"><link rel="prefetch" href="/CS35-document/assets/safeline.html-BUma1iYh.js" as="script"><link rel="prefetch" href="/CS35-document/assets/back-end.html-DWn1Vpef.js" as="script"><link rel="prefetch" href="/CS35-document/assets/database.html-BGB8arkt.js" as="script"><link rel="prefetch" href="/CS35-document/assets/payments.html-BBJWhH79.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-setup.html-ZD90PpVP.js" as="script"><link rel="prefetch" href="/CS35-document/assets/stripe-webhooks.html-CSoPqcG0.js" as="script"><link rel="prefetch" href="/CS35-document/assets/404.html-BLfxSDDq.js" as="script"><link rel="prefetch" href="/CS35-document/assets/setupDevtools-7MC2TMWH-BPQNp8EH.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/CS35-document/"><img class="vp-site-logo" src="/CS35-document/favicon.png" alt="Open_WebUI with Stripe Integration"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">Open_WebUI with Stripe Integration</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/CS35-document/" aria-label="Home"><!---->Home<!----></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.sydney.edu.au/CS35-1/CS35-1" aria-label="Source" rel="noopener noreferrer" target="_blank"><!---->Source<!----></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active">Development <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/CS35-document/development/frontend/front-end.html" aria-label="Frontend development"><!---->Frontend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/backend/back-end.html" aria-label="Backend development"><!---->Backend development<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/development/database/database.html" aria-label="Database"><!---->Database<!----></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Payment Integration (Stripe) <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-setup/stripe-setup.html" aria-label="Stripe setup instructions"><!---->Stripe setup instructions<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/stripe-webhooks/stripe-webhooks.html" aria-label="Stripe webhooks"><!---->Stripe webhooks<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/stripe/payments/payments.html" aria-label="Payments"><!---->Payments<!----></a><!----></li><!--]--></ul></li><li><a class="route-link auto-link vp-sidebar-item vp-sidebar-heading" href="/CS35-document/testing/testing.html" aria-label="Testing"><!---->Testing<!----></a><!----></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading">Deployment <!----></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/deployment/azure/azure.html" aria-label="Azure"><!---->Azure<!----></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/CS35-document/deployment/safeline/safeline.html" aria-label="Safeline"><!---->Safeline<!----></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div class="theme-default-content" vp-content><!--[--><!--]--><div><h2 id="front-end-development-subscription-module" tabindex="-1"><a class="header-anchor" href="#front-end-development-subscription-module"><span>Front-end Development -- Subscription Module</span></a></h2><p>The technology stack for the front-end of this project is</p><ul><li>Svelte for building dynamic user interfaces.</li><li>TailwindCSS for styling.</li><li>Integration with RESTful APIs for data communication.</li></ul><h3 id="_1-selection-of-extensions" tabindex="-1"><a class="header-anchor" href="#_1-selection-of-extensions"><span>1. Selection of extensions</span></a></h3><p>First of all, based on the CS35-1 project requirements and our prototype diagram, we extend the code structure of Open_WebUI.</p><p>Add ‘Subscriptions’ and ‘My plan’ options to <code>src</code> | <code>lib</code> | <code>components</code> | <code>layout</code> | <code>Sidebar</code> | <code>UserMenu.svelte</code>, corresponding to the ‘Subscriptions’ and ‘My plan’ pages respectively.</p><div class="language-Svelte line-numbers-mode" data-highlighter="prismjs" data-ext="Svelte" data-title="Svelte"><pre><code><span class="line">&lt;DropdownMenu.Content&gt;</span>
<span class="line">...</span>
<span class="line">{#if $userSubscriptionStatus === 3 || $userSubscriptionStatus === 4}</span>
<span class="line">    &lt;button</span>
<span class="line">        class=&quot;flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition&quot;</span>
<span class="line">        on:click={() =&gt; {</span>
<span class="line">            goto(customerPortalUrl);</span>
<span class="line">        }}</span>
<span class="line">    &gt;</span>
<span class="line">        &lt;div class=&quot; self-center mr-3&quot;&gt;</span>
<span class="line">            &lt;Plan className=&quot;size-5&quot; strokeWidth=&quot;1.5&quot; /&gt;</span>
<span class="line">        &lt;/div&gt;</span>
<span class="line">        &lt;div class=&quot; self-center font-medium&quot;&gt;{$i18n.t(&#39;My plan&#39;)}&lt;/div&gt;</span>
<span class="line">    &lt;/button&gt;</span>
<span class="line">{:else if $userSubscriptionStatus === 1 || $userSubscriptionStatus === 2}</span>
<span class="line">    &lt;button</span>
<span class="line">        class=&quot;flex rounded-md py-2 px-3 w-full hover:bg-gray-50 dark:hover:bg-gray-800 transition&quot;</span>
<span class="line">        on:click={() =&gt; {</span>
<span class="line">            dispatch(&#39;show&#39;, &#39;subscriptions&#39;);</span>
<span class="line">            show = false;</span>
<span class="line">        }}</span>
<span class="line">    &gt;</span>
<span class="line">        &lt;div class=&quot; self-center mr-3&quot;&gt;</span>
<span class="line">            &lt;SubscribeBell className=&quot;size-5&quot; strokeWidth=&quot;1.5&quot; /&gt;</span>
<span class="line">        &lt;/div&gt;</span>
<span class="line">        &lt;div class=&quot; self-center font-medium&quot;&gt;{$i18n.t(&#39;Subscriptions&#39;)}&lt;/div&gt;</span>
<span class="line">    &lt;/button&gt;</span>
<span class="line">{/if}</span>
<span class="line">...</span>
<span class="line">&lt;/DropdownMenu.Content&gt;</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_2-added-subscriptionsmodal-svelte-component" tabindex="-1"><a class="header-anchor" href="#_2-added-subscriptionsmodal-svelte-component"><span>2. Added <code>SubscriptionsModal.svelte</code> component</span></a></h3><p>For displaying information about subscription packages (weekly/monthly/yearly), and service descriptions.</p><div class="language-Svelte line-numbers-mode" data-highlighter="prismjs" data-ext="Svelte" data-title="Svelte"><pre><code><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span>
<span class="line">	import Modal from &#39;$lib/components/common/Modal.svelte&#39;;</span>
<span class="line">	import Card from &#39;$lib/components/common/Card.svelte&#39;;</span>
<span class="line">	import { getContext, onMount } from &#39;svelte&#39;;</span>
<span class="line">	import { getCheckoutSession } from &#39;$lib/apis/Subscription&#39;;</span>
<span class="line">	import Exclamation from &#39;$lib/components/icons/Exclamation.svelte&#39;;</span>
<span class="line">	import { userPaymentMethod, userSubscriptionStatus } from &#39;$lib/stores&#39;;</span>
<span class="line"></span>
<span class="line">	const i18n = getContext(&#39;i18n&#39;);</span>
<span class="line"></span>
<span class="line">	export let show = false;</span>
<span class="line"></span>
<span class="line">	let paymentsUrls = &#39;&#39;;</span>
<span class="line"></span>
<span class="line">	onMount(async () =&gt; {</span>
<span class="line">		const checkoutSession = await getCheckoutSession(localStorage.token);</span>
<span class="line">		if (checkoutSession[0]) {</span>
<span class="line">			paymentsUrls = checkoutSession[1];</span>
<span class="line">		}</span>
<span class="line">	});</span>
<span class="line">&lt;/script&gt;</span>
<span class="line"></span>
<span class="line">&lt;Modal size=&quot;xl&quot; bind:show&gt;</span>
<span class="line">	&lt;div&gt;</span>
<span class="line">		&lt;div class=&quot; flex justify-between dark:text-gray-300 px-5 pt-4 pb-1&quot;&gt;</span>
<span class="line">			&lt;div class=&quot; text-lg font-medium self-center&quot;&gt;{$i18n.t(&#39;Subscriptions&#39;)}&lt;/div&gt;</span>
<span class="line">			&lt;button</span>
<span class="line">				class=&quot;self-center&quot;</span>
<span class="line">				on:click={() =&gt; {</span>
<span class="line">					show = false;</span>
<span class="line">				}}</span>
<span class="line">			&gt;</span>
<span class="line">				&lt;svg</span>
<span class="line">					xmlns=&quot;http://www.w3.org/2000/svg&quot;</span>
<span class="line">					viewBox=&quot;0 0 20 20&quot;</span>
<span class="line">					fill=&quot;currentColor&quot;</span>
<span class="line">					class=&quot;w-5 h-5&quot;</span>
<span class="line">				&gt;</span>
<span class="line">					&lt;path</span>
<span class="line">						d=&quot;M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z&quot;</span>
<span class="line">					/&gt;</span>
<span class="line">				&lt;/svg&gt;</span>
<span class="line">			&lt;/button&gt;</span>
<span class="line">		&lt;/div&gt;</span>
<span class="line"></span>
<span class="line">		{#if $userSubscriptionStatus === 1 &amp;&amp; $userPaymentMethod}</span>
<span class="line">			&lt;div class=&quot;flex flex-row justify-center gap-6 p-5&quot;&gt;</span>
<span class="line">				&lt;Card</span>
<span class="line">					title=&quot;Weekly&quot;</span>
<span class="line">					plan=&quot;weekly&quot;</span>
<span class="line">					price=&quot;5.99&quot;</span>
<span class="line">					subscriptionInterval=&quot;we&quot;</span>
<span class="line">					paymentsMethod={$userPaymentMethod}</span>
<span class="line">				&gt;</span>
<span class="line">					&lt;div class=&quot;text-sm pl-2 pt-2&quot;&gt;</span>
<span class="line">						&lt;p&gt;✓ Chat with Ollama&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Authentication and authorisation&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ User Registration&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Configuration management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Safety Functions&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Subscription Management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Payment System&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Customer Support&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Content Filtering&lt;/p&gt;</span>
<span class="line">					&lt;/div&gt;</span>
<span class="line">				&lt;/Card&gt;</span>
<span class="line"></span>
<span class="line">				&lt;Card</span>
<span class="line">					title=&quot;Yearly&quot;</span>
<span class="line">					plan=&quot;annually&quot;</span>
<span class="line">					price=&quot;199.99&quot;</span>
<span class="line">					subscriptionInterval=&quot;ye&quot;</span>
<span class="line">					recommend=&quot;recommend&quot;</span>
<span class="line">					paymentsMethod={$userPaymentMethod}</span>
<span class="line">				&gt;</span>
<span class="line">					&lt;div class=&quot;text-sm pl-2 pt-2&quot;&gt;</span>
<span class="line">						&lt;p&gt;✓ Chat with Ollama&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Authentication and authorisation&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ User Registration&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Configuration management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Safety Functions&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Subscription Management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Payment System&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Customer Support&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Content Filtering&lt;/p&gt;</span>
<span class="line">					&lt;/div&gt;</span>
<span class="line">				&lt;/Card&gt;</span>
<span class="line"></span>
<span class="line">				&lt;Card</span>
<span class="line">					title=&quot;Monthly&quot;</span>
<span class="line">					plan=&quot;monthly&quot;</span>
<span class="line">					price=&quot;19.99&quot;</span>
<span class="line">					subscriptionInterval=&quot;mo&quot;</span>
<span class="line">					paymentsMethod={$userPaymentMethod}</span>
<span class="line">				&gt;</span>
<span class="line">					&lt;div class=&quot;text-sm pl-2 pt-2&quot;&gt;</span>
<span class="line">						&lt;p&gt;✓ Chat with Ollama&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Authentication and authorisation&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ User Registration&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Configuration management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Safety Functions&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Subscription Management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Payment System&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Customer Support&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Content Filtering&lt;/p&gt;</span>
<span class="line">					&lt;/div&gt;</span>
<span class="line">				&lt;/Card&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line">			&lt;div class=&quot;flex justify-end pr-8 pb-3 dark:text-white&quot;&gt;</span>
<span class="line">				&lt;Exclamation /&gt;</span>
<span class="line">				&lt;p class=&quot;pb-3 pl-2&quot;&gt;You can cancel your subscription at any time.&lt;/p&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line">		{:else}</span>
<span class="line">			&lt;div class=&quot;flex flex-row justify-center gap-6 p-5&quot;&gt;</span>
<span class="line">				&lt;Card title=&quot;Weekly&quot; price=&quot;5.99&quot; subscriptionInterval=&quot;we&quot; paymentURL={paymentsUrls[0]}&gt;</span>
<span class="line">					&lt;div class=&quot;text-sm pl-2 pt-2&quot;&gt;</span>
<span class="line">						&lt;p&gt;✓ Chat with Ollama&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Authentication and authorisation&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ User Registration&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Configuration management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Safety Functions&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Subscription Management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Payment System&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Customer Support&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Content Filtering&lt;/p&gt;</span>
<span class="line">					&lt;/div&gt;</span>
<span class="line">				&lt;/Card&gt;</span>
<span class="line"></span>
<span class="line">				&lt;Card</span>
<span class="line">					title=&quot;Yearly&quot;</span>
<span class="line">					price=&quot;199.99&quot;</span>
<span class="line">					subscriptionInterval=&quot;ye&quot;</span>
<span class="line">					paymentURL={paymentsUrls[2]}</span>
<span class="line">					recommend=&quot;recommend&quot;</span>
<span class="line">				&gt;</span>
<span class="line">					&lt;div class=&quot;text-sm pl-2 pt-2&quot;&gt;</span>
<span class="line">						&lt;p&gt;✓ Chat with Ollama&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Authentication and authorisation&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ User Registration&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Configuration management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Safety Functions&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Subscription Management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Payment System&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Customer Support&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Content Filtering&lt;/p&gt;</span>
<span class="line">					&lt;/div&gt;</span>
<span class="line">				&lt;/Card&gt;</span>
<span class="line"></span>
<span class="line">				&lt;Card title=&quot;Monthly&quot; price=&quot;19.99&quot; subscriptionInterval=&quot;mo&quot; paymentURL={paymentsUrls[1]}&gt;</span>
<span class="line">					&lt;div class=&quot;text-sm pl-2 pt-2&quot;&gt;</span>
<span class="line">						&lt;p&gt;✓ Chat with Ollama&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Authentication and authorisation&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ User Registration&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Configuration management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Safety Functions&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Subscription Management&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Payment System&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Customer Support&lt;/p&gt;</span>
<span class="line">						&lt;p&gt;✓ Content Filtering&lt;/p&gt;</span>
<span class="line">					&lt;/div&gt;</span>
<span class="line">				&lt;/Card&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line">			&lt;div class=&quot;flex justify-end pr-8 pb-3&quot;&gt;</span>
<span class="line">				&lt;Exclamation /&gt;</span>
<span class="line">				&lt;p class=&quot;pb-3 pl-2&quot;&gt;You can cancel your subscription at any time.&lt;/p&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line">		{/if}</span>
<span class="line">	&lt;/div&gt;</span>
<span class="line">&lt;/Modal&gt;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-added-card-svelte-component" tabindex="-1"><a class="header-anchor" href="#_3-added-card-svelte-component"><span>3. Added <code>Card.svelte</code> component</span></a></h3><p>The use of component-based design, thus increasing code reuse and avoiding code duplication.</p><div class="language-Svelte line-numbers-mode" data-highlighter="prismjs" data-ext="Svelte" data-title="Svelte"><pre><code><span class="line">&lt;script lang=&quot;ts&quot;&gt;</span>
<span class="line">	import { goto } from &#39;$app/navigation&#39;;</span>
<span class="line">	import { getPaymentSetupLink } from &#39;$lib/apis/Subscription&#39;;</span>
<span class="line"></span>
<span class="line">	export let title: string = &#39;&#39;;</span>
<span class="line">	export let subscriptionInterval: string = &#39;&#39;;</span>
<span class="line">	export let price: string = &#39;&#39;;</span>
<span class="line">	export let paymentURL: string = &#39;&#39;;</span>
<span class="line">	export let recommend: string = &#39;&#39;;</span>
<span class="line">	export let paymentsMethod: string = &#39;&#39;;</span>
<span class="line">	export let plan: string = &#39;&#39;;</span>
<span class="line"></span>
<span class="line">	import Sparkles from &#39;../icons/Sparkles.svelte&#39;;</span>
<span class="line"></span>
<span class="line">	const handleSubscribeButtonClick = async (plan: string) =&gt; {</span>
<span class="line">		if (paymentsMethod == &#39;Free-trial&#39;) {</span>
<span class="line">			const result = await getPaymentSetupLink(plan, localStorage.token);</span>
<span class="line">			if (result[0]) {</span>
<span class="line">				window.location.href = result[1];</span>
<span class="line">			}</span>
<span class="line">		}</span>
<span class="line">	};</span>
<span class="line">&lt;/script&gt;</span>
<span class="line"></span>
<span class="line">&lt;div class=&quot;relative&quot;&gt;</span>
<span class="line">	{#if recommend == &#39;recommend&#39;}</span>
<span class="line">		&lt;div</span>
<span class="line">			class=&quot;absolute -top-[22px] left-1/2 transform -translate-x-[48.7%] bg-teal-700 dark:bg-white text-white py-1 px-8 rounded-t-2xl rounded-b-none flex items-center justify-center space-x-2 z-10 w-[313px] dark:text-black&quot;</span>
<span class="line">		&gt;</span>
<span class="line">			&lt;Sparkles /&gt;</span>
<span class="line">			&lt;span class=&quot;text-sm font-bold whitespace-nowrap&quot;&gt;Best Recommended&lt;/span&gt;</span>
<span class="line">		&lt;/div&gt;</span>
<span class="line">	{/if}</span>
<span class="line"></span>
<span class="line">	&lt;div</span>
<span class="line">		class=&quot;card-container {recommend == &#39;recommend&#39;</span>
<span class="line">			? &#39;border-t-[10px] border-r-4 border-l-4 border-b-4 border-teal-700 dark:border-white rounded-2xl -translate-y-[10px]&#39;</span>
<span class="line">			: &#39;border border-gray-300 hover:outline outline-6 hover:outline-teal-700 dark:hover:outline-white rounded-2xl&#39;} w-full m-1 mb-3 flex flex-col max-w-sm overflow-hidden shadow-lg dark:text-white&quot;</span>
<span class="line">	&gt;</span>
<span class="line">		&lt;div class=&quot;px-4 py-4&quot;&gt;</span>
<span class="line">			&lt;div class=&quot;flex justify-center font-bold text-xl mb-2&quot;&gt;{title}&lt;/div&gt;</span>
<span class="line"></span>
<span class="line">			&lt;div class=&quot;flex justify-center my-9&quot;&gt;</span>
<span class="line">				&lt;div&gt;&lt;span class=&quot;pb-0&quot;&gt;$&lt;/span&gt;&lt;/div&gt;</span>
<span class="line">				&lt;span class=&quot;font-bold text-5xl pl-4&quot;&gt;{price}&lt;/span&gt;</span>
<span class="line">				&lt;span class=&quot;pt-5 pl-2&quot;&gt;/ {subscriptionInterval}&lt;/span&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line"></span>
<span class="line">			&lt;p class=&quot;text-xs pr-2 text-right&quot;&gt;</span>
<span class="line">				billed {title.toLocaleLowerCase()}, approximately</span>
<span class="line">				{#if title == &#39;Yearly&#39;}$16.66 / mo</span>
<span class="line">				{:else if title == &#39;Monthly&#39;}$4.99 / we</span>
<span class="line">				{:else}</span>
<span class="line">					$0.87 / day</span>
<span class="line">				{/if}</span>
<span class="line">			&lt;/p&gt;</span>
<span class="line"></span>
<span class="line">			&lt;div class=&quot;flex justify-center py-2 mb-5&quot;&gt;</span>
<span class="line">				&lt;button</span>
<span class="line">					class=&quot;bg-teal-700 p-2 w-40 mt-4 rounded-lg text-white font-bold text-sm hover:bg-teal-600 hover:ring-2 hover:ring-teal-600&quot;</span>
<span class="line">					on:click={() =&gt;</span>
<span class="line">						paymentsMethod == &#39;Free-trial&#39; ? handleSubscribeButtonClick(plan) : goto(paymentURL)}</span>
<span class="line">				&gt;</span>
<span class="line">					Subscirbe now&lt;/button</span>
<span class="line">				&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line"></span>
<span class="line">			&lt;!-- &lt;div class=&quot;flex justify-center py-5 text-sm&quot;&gt;</span>
<span class="line">				&lt;p&gt;</span>
<span class="line">					or &lt;a href={paymentURL}&gt;&lt;span class=&quot;font-bold underline&quot;&gt;Subscirbe now&lt;/span&gt;&lt;/a&gt;</span>
<span class="line">				&lt;/p&gt;</span>
<span class="line">			&lt;/div&gt; --&gt;</span>
<span class="line">			&lt;div class=&quot;flex justify-center&quot;&gt;</span>
<span class="line">				&lt;hr class=&quot;border-gray-600 bg-transparent w-11/12&quot; /&gt;</span>
<span class="line">			&lt;/div&gt;</span>
<span class="line">		&lt;/div&gt;</span>
<span class="line">		&lt;div class=&quot;px-8 pb-6&quot;&gt;</span>
<span class="line">			&lt;p&gt;All basic features:&lt;/p&gt;</span>
<span class="line">			&lt;slot /&gt;</span>
<span class="line">		&lt;/div&gt;</span>
<span class="line">	&lt;/div&gt;</span>
<span class="line">&lt;/div&gt;</span>
<span class="line"></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_4-modifications-to-the-chat-svelte-component-permission-control" tabindex="-1"><a class="header-anchor" href="#_4-modifications-to-the-chat-svelte-component-permission-control"><span>4. Modifications to the <code>Chat.svelte</code> component (permission control)</span></a></h3><p>The <code>role</code> property is added to the <code>Chat.svelte</code> component, and the user role is retrieved in the <code>onMount</code> hook and stored in the <code>$user</code> object. Then, in the <code>Chat.svelte</code> component, the <code>$user?.role</code> is used to determine the user role, and based on the user role, it decides whether or not to display the <code>UnsubscribedUserOverlay</code>, which is required to prevent unsubscribed users from using the AI chat feature. Second, when a user has a history of chats, <code>(chatIdProp &amp;&amp; messages.length &gt; 0)</code>, we allow the user to view past chats.</p><div class="language-Svelte line-numbers-mode" data-highlighter="prismjs" data-ext="Svelte" data-title="Svelte"><pre><code><span class="line">{#if $user?.role != &#39;unsubscribed&#39; || (chatIdProp &amp;&amp; messages.length &gt; 0)}</span>
<span class="line">       ...</span>
<span class="line">        {#if $user?.role != &#39;unsubscribed&#39;}</span>
<span class="line">            &lt;div class={showControls ? &#39;lg:pr-[24rem]&#39; : &#39;&#39;}&gt;</span>
<span class="line">                &lt;MessageInput</span>
<span class="line">                    bind:files</span>
<span class="line">                    bind:prompt</span>
<span class="line">                    bind:autoScroll</span>
<span class="line">                    bind:selectedToolIds</span>
<span class="line">                    bind:webSearchEnabled</span>
<span class="line">                    bind:atSelectedModel</span>
<span class="line">                    availableToolIds={selectedModelIds.reduce((a, e, i, arr) =&gt; {</span>
<span class="line">                        const model = $models.find((m) =&gt; m.id === e);</span>
<span class="line">                        if (model?.info?.meta?.toolIds ?? false) {</span>
<span class="line">                            return [...new Set([...a, ...model.info.meta.toolIds])];</span>
<span class="line">                        }</span>
<span class="line">                        return a;</span>
<span class="line">                    }, [])}</span>
<span class="line">                    transparentBackground={$settings?.backgroundImageUrl ?? false}</span>
<span class="line">                    {selectedModels}</span>
<span class="line">                    {messages}</span>
<span class="line">                    {submitPrompt}</span>
<span class="line">                    {stopResponse}</span>
<span class="line">                /&gt;</span>
<span class="line">            &lt;/div&gt;</span>
<span class="line"></span>
<span class="line">          ...</span>
<span class="line">        {/if}</span>
<span class="line">    &lt;/div&gt;</span>
<span class="line">{:else}</span>
<span class="line">    &lt;UnsubscribedUserOverlay /&gt;</span>
<span class="line">{/if}</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><!----><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="vp-meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: StevenFeng1020@outlook.com">StevenFeng</span><!----><!--]--><!--]--></span></div></div></footer><nav class="vp-page-nav" aria-label="page navigation"><!----><a class="route-link auto-link next" href="/CS35-document/development/backend/back-end.html" aria-label="Backend development"><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span>Backend development</span></div></a></nav><!--[--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/CS35-document/assets/app-B8T7LOny.js" defer></script>
  </body>
</html>
